{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://raw.githubusercontent.com/umi-amplicon/master/nextflow_schema.json",
    "title": "umi-amplicon pipeline parameters",
    "description": "UMI-tagged amplicon sequencing analysis pipeline",
    "type": "object",
    "properties": {
        "input": {
            "type": "string",
            "format": "file-path",
            "description": "Path to input samplesheet"
        },
        "outdir": {
            "type": "string",
            "format": "directory-path",
            "description": "The output directory where the results will be saved"
        },
        "umitools_path": {
            "type": "string",
            "default": "umitools",
            "description": "Path to UMI-tools installation"
        },
        "umi_length": {
            "type": "integer",
            "default": 12,
            "description": "Length of UMI sequences"
        },
        "umi_pattern": {
            "type": "string",
            "default": "NNNNNNNNNNNN",
            "description": "Pattern for UMI extraction"
        },
        "umi_method": {
            "type": "string",
            "enum": ["directional", "unique"],
            "default": "directional",
            "description": "UMI extraction method"
        },
        "umi_quality_threshold": {
            "type": "integer",
            "default": 10,
            "description": "Minimum quality score for UMI bases"
        },
        "umi_collision_rate_threshold": {
            "type": "number",
            "default": 0.1,
            "description": "Maximum acceptable collision rate"
        },
        "umi_diversity_threshold": {
            "type": "integer",
            "default": 1000,
            "description": "Minimum UMI diversity"
        },
        "umi_tool": {
            "type": "string",
            "enum": ["umitools", "fgbio"],
            "default": "umitools",
            "description": "UMI processing tool"
        },
        "group_strategy": {
            "type": "string",
            "enum": ["paired", "single"],
            "default": "paired",
            "description": "Grouping strategy for fgbio"
        },
        "consensus_strategy": {
            "type": "string",
            "enum": ["paired", "single"],
            "default": "paired",
            "description": "Consensus strategy for fgbio"
        },
        "min_reads": {
            "type": "integer",
            "default": 1,
            "description": "Minimum reads per UMI group"
        },
        "min_fraction": {
            "type": "number",
            "default": 0.5,
            "description": "Minimum fraction for consensus"
        },
        "error_rate_pre_umi": {
            "type": "number",
            "default": 0.01,
            "description": "Error rate pre-UMI for fgbio"
        },
        "max_edit_distance": {
            "type": "integer",
            "default": 1,
            "description": "Maximum edit distance for filtering"
        },
        "min_base_quality": {
            "type": "integer",
            "default": 20,
            "description": "Minimum base quality for filtering"
        },
        "skip_umi_qc": {
            "type": "boolean",
            "default": false,
            "description": "Skip UMI quality control metrics"
        },
        "skip_umi_analysis": {
            "type": "boolean",
            "default": false,
            "description": "Skip UMI analysis pipeline"
        },
        "skip_report": {
            "type": "boolean",
            "default": false,
            "description": "Skip HTML report generation"
        }
    },
    "required": ["input", "outdir"]
}
