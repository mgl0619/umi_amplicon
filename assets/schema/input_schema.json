{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://raw.githubusercontent.com/umi-amplicon/master/nextflow_schema.json",
    "title": "umi-amplicon pipeline parameters",
    "description": "UMI-tagged amplicon sequencing analysis pipeline",
    "type": "object",
    "properties": {
        "input": {
            "type": "string",
            "format": "file-path",
            "description": "Path to input samplesheet"
        },
        "outdir": {
            "type": "string",
            "format": "directory-path",
            "description": "The output directory where the results will be saved",
            "default": "./results"
        },
        "fasta": {
            "type": "string",
            "format": "file-path",
            "description": "Path to reference genome FASTA file"
        },
        "bwa_index": {
            "type": "string",
            "format": "directory-path",
            "description": "Path to BWA index directory (optional, will be generated if not provided)"
        },
        "gtf": {
            "type": "string",
            "format": "file-path",
            "description": "Path to GTF annotation file for feature counting (optional)"
        },
        "umi_length": {
            "type": "integer",
            "default": 12,
            "description": "Length of UMI sequences"
        },
        "umi_pattern": {
            "type": "string",
            "default": "NNNNNNNNNNNN",
            "description": "Pattern for UMI extraction"
        },
        "umi_method": {
            "type": "string",
            "enum": ["directional", "unique", "cluster", "adjacency"],
            "default": "directional",
            "description": "UMI deduplication method"
        },
        "umi_quality_filter_threshold": {
            "type": "integer",
            "default": 15,
            "description": "Quality filter threshold for UMI bases"
        },
        "umi_collision_rate_threshold": {
            "type": "number",
            "default": 0.1,
            "description": "Maximum acceptable collision rate"
        },
        "umi_diversity_threshold": {
            "type": "integer",
            "default": 1000,
            "description": "Minimum expected UMI diversity"
        },
        "max_edit_distance": {
            "type": "integer",
            "default": 1,
            "description": "Maximum edit distance for UMI clustering"
        },
        "min_base_quality": {
            "type": "integer",
            "default": 20,
            "description": "Minimum base quality for filtering"
        },
        "merge_pairs": {
            "type": "boolean",
            "default": false,
            "description": "Merge paired-end reads after trimming (not recommended for UMI dedup)"
        },
        "skip_mosdepth": {
            "type": "boolean",
            "default": false,
            "description": "Skip mosdepth coverage analysis"
        }
    },
    "required": ["input", "fasta"]
}
